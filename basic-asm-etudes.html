<!DOCTYPE html>
<html>
    <head>
        <title>Примеры</title>
	    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display&display=swap" rel="stylesheet">
	    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	    <link rel="stylesheet" href="basic-asm-etudes.css"></link>
	    <script src="jquery.min.js" type="text/javascript"></script>
    </head>
    <body>
        <!---<h2>Примеры</h2>--->
        <fieldset>
            <legend>Самая короткая программа</legend>
            <section>
            <pre>
            push 0
            call [405058h]	; вызов функции ExitProcess Windows API.
            </pre>
            Программа делает ничего, кроме того, что правильно заканчивается. Любая программа должна заканчиваться именно так.<br>
			Здесь и далее символ ';' означает коммантарий до конца строки.
            </section>
        </fieldset>

        <fieldset>
            <legend>Ввод строки</legend>
            <section>
            <pre>
            mov edi, 402000h ; в регистр edi записываем адрес, по которому подпрограмма разместит введённую строку
            call 403000h     ; по адресу 403000h находится подпрограмма ввода из стандартного потока, вызываем её
            </pre>
            Рассчитывать на сохранение значений в регистрах после работы подпрограммы не стоит.<br>
            После работы подпрограммы в регистре eax будет записано количество введённых символов.<br>
            Если строка заканчивалась концом строки, то код(ы) конца строки тоже будет введены и посчитаны.
            </section>
        </fieldset> 

        <fieldset>
            <legend>Вывод строки</legend>
            <section>
            <pre>
            mov esi, 402000h ; в регистр esi кладём адрес начала строки
            mov eax, dh      ; в регистр eax - количество байт строки
            call 403100h     ; по адресу 403100h находится подпрограмма вывода в стандартный поток, вызываем её
            </pre>
            Рассчитывать на сохранение значений регистров после работы подпрограммы не стоит.
            </section>
        </fieldset>

        <fieldset>
            <legend>Повторение строки</legend>
            <section>
            <pre>
        ; вводим строку из стандартного потока
            mov edi, 402000h
            call 403000h
        ; выводим строку в стандартный поток
            mov esi, 402000h
            call 403100h
        ; завершаем программу
            push 0
            call [405058h]	
            </pre>
            </section>
        </fieldset>

        <fieldset>
            <legend>Повторение строки без конца строки</legend>
            <section>
            <pre>
            mov edi, 402000h
            call 403000h
            sub eax, 2
            mov esi, 402000h
            call 403100h
            push 0
            call [405058h]	
            </pre>
            Конец строки представлен двумя байтами. Эти два байта находятся в конце строки. Соответственно, перед выводом уменьшаем длину строки на 2.
			</section>
        </fieldset>

        <fieldset>
            <legend>Вывод целого неотрицательного числа</legend>
            <section>
            <pre>
            mov eax, 1580    ; кладём в аккумулятор число, которое хотим вывести
            mov edi, 402100h ; в edi записываем адрес памяти, ДО которого мы хотим разместить цифры числа
            mov ecx, 0       ; ecx будет считать цифры
            mov ebx, 10      ; в ebx будем хранить основание системы счисления, в которой нужно вывести число
        ; тело цикла деления в столбик
            mov edx, 0       ; заполняем нулём старшие биты делимого
            div ebx          ; делим число 64-разрядное число edxeax на основание системы счисления
            add dl, 48       ; к остатку добавляем код нуля и получаем код очередной цифры
            dec edi          ; переходим к следующему байту
            mov [edi], dl    ; заполняем его кодом очередной цифры
            inc ecx          ; увеличиваем счётчик цифр
            cmp eax, 0       ; сравниваем оставшееся число с нулём
            jnz ......       ; если там не ноль, то переходим к началу тела цикла, тут нужно указать адрес первой команды тела цикла
        ; выводим полученную строку цифр
            mov esi, edi     ; в edi хранится адрес последней (самой старшей) цифры
            mov eax, ecx
            call 403100h
        ; конец программы
            push 0
            call [405058h]	
            </pre>
            Конец строки представлен двумя байтами. Эти два байта находятся в конце строки. Соответственно, перед выводом уменьшаем длину строки на 2.
			</section>
        </fieldset>
    </body>
</html>